<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-67GMJVRZLP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-67GMJVRZLP');
    </script>
    <!-- Google AdSense Script with Error Handling -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
            crossorigin="anonymous"
            onerror="console.error('Failed to load AdSense script');"></script>
    <meta charset="utf-8" />
    <link rel="icon" href="assets/favicon.ico" />
    <meta name="viewport" content="width=device-width" />
    <meta
      name="description"
      content="Abyss is the best and most modern proxy to avoid modern censorship."
    />
    <title>Abyss</title>
    <link
      rel="stylesheet"
      id="default-theme"
      href="assets/themes/moon.css"
      defer
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script src="tabsys.js" onerror="console.error('Failed to load tabsys.js');"></script>
    <script src="themesys.js" onerror="console.error('Failed to load themesys.js');"></script>
    <script src="class/uv.bundle.js" defer onerror="console.error('Failed to load uv.bundle.js');"></script>
    <script src="class/uv.config.js" defer onerror="console.error('Failed to load uv.config.js');"></script>
    <script src="particles.js" defer onerror="console.error('Failed to load particles.js');"></script>
    <script src="index.js" defer onerror="console.error('Failed to load index.js');"></script>
  </head>

  <body style="background: black">
    <!-- Other body content unchanged -->
    <div id="tabTemplate" style="display: block">
      <div class="mainStartContain extFrame">
        <div class="imageContain">
          <div>
            <h1>abyss</h1>
            <p id="quote">penis</p>
            <input
              id="adrbar2"
              type="url"
              placeholder="type here to search..."
            />
            <!-- Google AdSense Ad Unit with Fallback -->
            <div id="adContainer" style="margin-top: 20px; text-align: center; display: none;">
              <ins class="adsbygoogle"
                   style="display:block"
                   data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                   data-ad-slot="YYYYYYYYYY"
                   data-ad-format="auto"
                   data-full-width-responsive="true"></ins>
              <div id="adFallback" style="display: none; color: white;">Ads not available</div>
              <script>
                try {
                  (adsbygoogle = window.adsbygoogle || []).push({});
                } catch (e) {
                  console.error('Failed to initialize AdSense ad:', e);
                  document.getElementById('adFallback').style.display = 'block';
                  document.querySelector('#adContainer .adsbygoogle').style.display = 'none';
                }
              </script>
            </div>
          </div>
        </div>
      </div>
      <p><a id="invite" onclick="runService('discord.gg/goabyss')" style="font-size: 20px;
        font-weight: 500;
        position: absolute;
        top: calc(100% - 25px);
        left: 0%;
        text-decoration: none; cursor:pointer;">Discord</a><a style="font-size: 20px;
        font-weight: 500;
        position: absolute;
        top: calc(100% - 25px);
        left: calc(0% + 100px);
        text-decoration: none; cursor:pointer;" onclick="runService('https://intoabyss.org/github')">Github</a></p>
      <p style="font-size: 16px;
        font-weight: 300;
        position: absolute;
        top: calc(100% - 38px);
        left: calc(100% - 270px);
        text-decoration: none;"></p>
    </div>
    <!-- Rest of the body content unchanged -->
    <script>
      // Ensure ad container respects ad preference setting
      document.addEventListener('DOMContentLoaded', () => {
        const adSelector = document.getElementById('adChangeSelector');
        const adContainer = document.getElementById('adContainer');
        if (adSelector && adContainer) {
          const currentValue = adSelector.value || localStorage.getItem('adPreference') || 'adchangeon';
          adContainer.style.display = currentValue === 'adchangeon' ? 'block' : 'none';
        }
      });

      // Update adChange to handle ad container visibility
      function adChange(value) {
        const adContainer = document.getElementById('adContainer');
        if (adContainer) {
          adContainer.style.display = value === 'adchangeon' ? 'block' : 'none';
          localStorage.setItem('adPreference', value); // Persist preference
        }
      }
    </script>
  </body>
</html>
